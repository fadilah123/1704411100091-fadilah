



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Penjelasan Tentang K-Means Clustering And K-Nearest neighbor">
      
      
        <link rel="canonical" href="https://sitimusabbiahtulfadilah1234.github.io/170441100091-fadilah/pohon_keputusan/">
      
      
        <meta name="author" content="siti musabbihatul fadilah">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Pohon Keputusan - K-Means Clustering And K-Nearest neighbor</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "None", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#decision-tree" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://sitimusabbiahtulfadilah1234.github.io/170441100091-fadilah/" title="K-Means Clustering And K-Nearest neighbor" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              K-Means Clustering And K-Nearest neighbor
            </span>
            <span class="md-header-nav__topic">
              Pohon Keputusan
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/sitimusabbiahtulfadilah1234/170441100091-fadilah" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    sitimusabbiahtulfadilah1234/170441100091-fadilah
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="K-Means  data iris" class="md-tabs__link md-tabs__link--active">
        K-Means  data iris
      </a>
    
  </li>

      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://sitimusabbiahtulfadilah1234.github.io/170441100091-fadilah/" title="K-Means Clustering And K-Nearest neighbor" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    K-Means Clustering And K-Nearest neighbor
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/sitimusabbiahtulfadilah1234/170441100091-fadilah" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    sitimusabbiahtulfadilah1234/170441100091-fadilah
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="K-Means data iris" class="md-nav__link">
      K-Means  data iris
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../K-NN/" title="KNN data iris" class="md-nav__link">
      KNN data iris
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Pohon Keputusan
      </label>
    
    <a href="./" title="Pohon Keputusan" class="md-nav__link md-nav__link--active">
      Pohon Keputusan
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pengertian-decision-tree" title="PENGERTIAN DECISION TREE" class="md-nav__link">
    PENGERTIAN DECISION TREE
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pubg" title="PUBG" class="md-nav__link">
    PUBG
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision-trees" title="Decision Trees" class="md-nav__link">
    Decision Trees
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prepare-data" title="Prepare data" class="md-nav__link">
    Prepare data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-engineering" title="Feature Engineering" class="md-nav__link">
    Feature Engineering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-tree-model" title="Decision tree model" class="md-nav__link">
    Decision tree model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-forest" title="Random forest" class="md-nav__link">
    Random forest
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pengertian-decision-tree" title="PENGERTIAN DECISION TREE" class="md-nav__link">
    PENGERTIAN DECISION TREE
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pubg" title="PUBG" class="md-nav__link">
    PUBG
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision-trees" title="Decision Trees" class="md-nav__link">
    Decision Trees
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prepare-data" title="Prepare data" class="md-nav__link">
    Prepare data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-engineering" title="Feature Engineering" class="md-nav__link">
    Feature Engineering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-tree-model" title="Decision tree model" class="md-nav__link">
    Decision tree model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-forest" title="Random forest" class="md-nav__link">
    Random forest
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="decision-tree">Decision Tree<a class="headerlink" href="#decision-tree" title="Permanent link">&para;</a></h1>
<p><img alt="" src="../assets/images/dc1.PNG" /></p>
<h5 id="pengertian-decision-tree">PENGERTIAN DECISION TREE<a class="headerlink" href="#pengertian-decision-tree" title="Permanent link">&para;</a></h5>
<p><strong>Decision tree</strong> menggunakan strukur pohon berhierarki. Konsep dari metode ini adalah mengubah data menjadi pohon keputusan dan aturan-aturan keputusan. Manfaat dari penggunaan metode ini adalah kemampuannya memecah proses pengambilan keputusan yang kompleks menjadi lebih sederhana sehingga pengambilan keputusan lebih mudah dipahami dan lebih mudah di interpetasi. Kualitas dari suatu hasil decision trees tergantung dari bagaimana pohon tersebut didesain. Metode lain yang bisa digunakan untuk melakukan klasifikasi yaitu <em>Random Forest</em> yang merupakan pengembangan dari decision tree.</p>
<p><strong>Decision Tree</strong> (pohon keputusan) secara khusus melakukan pemodelan dengan berusaha memodel record yang tersedia ke dalam bentuk pohon keputusan. Dimana dalam suatu pohon keputusan akan ada interior node yang dilabeli dengan suatu variabel. Dari setiap interior node akan keluar tanda panah yang dilabeli dengan nilai dari variabel yang ada pada interior node tersebut. Di bagian akhir pohon keputusan akan terdapat leaf yang dilabeli dengan class atau category. Dalam penggunaannya, atau dalam pengimplementasian model decision trees ini ke dalam suatu sistem (umumnya sistem pendukung keputusan), model pohon keputusan yang didapat perlu diekstrak ke dalam bentuk rule-rule yang berbentuk if – then.</p>
<p>BERIKUT ADALAH PROGRAM YANG AKAN SAYA TAMPILKAN YAITU **EXPLORING DECISION TREES USING PUBG DATA</p>
<h4 id="pubg">PUBG<a class="headerlink" href="#pubg" title="Permanent link">&para;</a></h4>
<p>Video game gaya Battle Royale telah mengejutkan dunia. 100 pemain dijatuhkan ke sebuah pulau dengan tangan kosong dan harus menjelajahi, mengais, dan menghilangkan pemain lain sampai hanya satu yang tersisa, semuanya sementara zona bermain terus menyusut.</p>
<pre class="codehilite"><code>(PUBG) Player Unknown Battle Grounds telah menikmati popularitas besar. Dengan lebih dari 50 juta kopi terjual, ini adalah game terlaris kelima sepanjang masa, dan memiliki jutaan pemain bulanan aktif.</code></pre>

<p>Tim di PUBG telah membuat data game resmi tersedia untuk umum untuk dijelajahi dan diambil di luar "The Blue Circle." Kompetisi ini bukan situs PUBG resmi atau berafiliasi - Kaggle mengumpulkan data yang dimungkinkan melalui API Pengembang PUBG</p>
<p>Anda diberi lebih dari 65.000 data gim pemain yang dianonimkan, dipecah menjadi set pelatihan dan pengujian, dan diminta untuk memprediksi penempatan akhir dari statistik dalam gim akhir dan peringkat pemain awal.</p>
<p>Apa strategi terbaik untuk menang di PUBG? Haruskah Anda duduk di satu tempat dan menyembunyikan jalan menuju kemenangan, atau apakah Anda perlu menjadi yang terbaik? Biarkan data yang berbicara!</p>
<pre class="codehilite"><code>%matplotlib inline
import numpy as np 
import pandas as
import os</code></pre>

<p><img alt="" src="../assets/images/dc2.PNG" /></p>
<pre class="codehilite"><code>train = pd.read_csv('Downloads/input/train_V2.csv')
test = pd.read_csv('Download/input/test_V2.csv')
train.head()</code></pre>

<p><img alt="" src="../assets/images/dc3.PNG" /></p>
<pre class="codehilite"><code>train.shape, test.shape</code></pre>

<p><img alt="" src="../assets/images/dc4.PNG" /></p>
<pre class="codehilite"><code>test.head()</code></pre>

<p><img alt="" src="../assets/images/dc5.PNG" /></p>
<pre class="codehilite"><code>train.columns</code></pre>

<p><img alt="" src="../assets/images/dc6.PNG" /></p>
<pre class="codehilite"><code>target_col = 'winPlacePerc'

train.drop(2744604, inplace=True, errors='ignore')</code></pre>

<h3 id="decision-trees">Decision Trees<a class="headerlink" href="#decision-trees" title="Permanent link">&para;</a></h3>
<p>Mari kita membangun penyesuai pohon keputusan, Regrasor adalah model pembelajaran meachine yang digunakan untuk memprediksi variabel kontinu. Karena Kami berharap memiliki hubungan fungsional berkelanjutan antara input dan output akhir. Lebih baik menggunakan Regrassor untuk masalah ini</p>
<h4 id="prepare-data">Prepare data<a class="headerlink" href="#prepare-data" title="Permanent link">&para;</a></h4>
<pre class="codehilite"><code>train.dtypes</code></pre>

<p><img alt="" src="../assets/images/dc7.PNG" /></p>
<pre class="codehilite"><code>train['Id'].describe()</code></pre>

<p><img alt="" src="../assets/images/dc8.PNG" /></p>
<pre class="codehilite"><code>train['groupId'].describe()</code></pre>

<p><img alt="" src="../assets/images/dc9.PNG" /></p>
<pre class="codehilite"><code>train['matchId'].describe()</code></pre>

<p><img alt="" src="../assets/images/dc10.PNG" /></p>
<pre class="codehilite"><code>train['matchType'].describe()</code></pre>

<p><img alt="" src="../assets/images/dc11.PNG" /></p>
<pre class="codehilite"><code>train['matchType'].unique()</code></pre>

<p><img alt="" src="../assets/images/dc12.PNG" /></p>
<pre class="codehilite"><code>pd.get_dummies(train['matchType']).head()</code></pre>

<p><img alt="" src="../assets/images/dc13.PNG" /></p>
<pre class="codehilite"><code># Dapatkan satu penyandian kolom yang cocok dengan MatchType
one_hot_train = pd.get_dummies(train['matchType'])

# Jatuhkan kolom B seperti yang sekarang dikodekan
train = train.drop('matchType', axis = 1)

# Bergabung dengan df yang disandikan
train = train.join(one_hot_train)
train.head()</code></pre>

<p><img alt="" src="../assets/images/dc14.PNG" /></p>
<pre class="codehilite"><code># Get one hot encoding of columns matchType
one_hot_test = pd.get_dummies(test['matchType'])

# Drop column B as it is now encoded
test = test.drop('matchType', axis = 1)

# Join the encoded df
test = test.join(one_hot_test)
test.head()</code></pre>

<p><img alt="" src="../assets/images/dc15.PNG" /></p>
<h4 id="feature-engineering">Feature Engineering<a class="headerlink" href="#feature-engineering" title="Permanent link">&para;</a></h4>
<pre class="codehilite"><code>print("Adding Features")
def add_feature(df):
    df['headshotrate'] = df['kills']/df['headshotKills']
    df['killStreakrate'] = df['killStreaks']/df['kills']
    df['healthitems'] = df['heals'] + df['boosts']
    df['totalDistance'] = df['rideDistance'] + df["walkDistance"] + df["swimDistance"]
    df['killPlace_over_maxPlace'] = df['killPlace'] / df['maxPlace']
    df['headshotKills_over_kills'] = df['headshotKills'] / df['kills']
    df['distance_over_weapons'] = df['totalDistance'] / df['weaponsAcquired']
    df['walkDistance_over_heals'] = df['walkDistance'] / df['heals']
    df['walkDistance_over_kills'] = df['walkDistance'] / df['kills']
    df['killsPerWalkDistance'] = df['kills'] / df['walkDistance']
    df["skill"] = df["headshotKills"] + df["roadKills"]
    df[df == np.Inf] = np.NaN
    df[df == np.NINF] = np.NaN
    print("Removing Na's From DF")
    df.fillna(0, inplace=True)
train.shape, test.shape</code></pre>

<p><img alt="" src="../assets/images/dc16.PNG" /></p>
<pre class="codehilite"><code>from sklearn.model_selection import train_test_split
train, val = train_test_split(train, test_size=0.2)
trainIds = train['Id']
testIds = test['Id']
#??train.drop
x_train = train.drop(['Id', 'groupId', 'matchId', target_col], axis=1)
x_train.head(1</code></pre>

<p><img alt="" src="../assets/images/dc17.PNG" /></p>
<pre class="codehilite"><code>y_train = train[target_col]
y_train.head()</code></pre>

<p><img alt="" src="../assets/images/dc18.PNG" /></p>
<pre class="codehilite"><code>x_val = val.drop(['Id', 'groupId', 'matchId', target_col], axis=1)
x_val.head(1)</code></pre>

<p><img alt="" src="../assets/images/dc19.PNG" /></p>
<pre class="codehilite"><code>y_val = val[target_col]
y_val.head()</code></pre>

<p><img alt="" src="../assets/images/dc20.PNG" /></p>
<pre class="codehilite"><code>x_test = test.drop(['Id', 'groupId', 'matchId'], axis=1)
x_test.head(1)</code></pre>

<p><img alt="" src="../assets/images/dc21.PNG" /></p>
<pre class="codehilite"><code>x_train.shape, x_test.shape</code></pre>

<p><img alt="" src="../assets/images/dc22.PNG" /></p>
<pre class="codehilite"><code>from sklearn.tree import DecisionTreeRegressor
#%timeit 
dtree=DecisionTreeRegressor(max_depth=3)
dtree.fit(x_train, y_train)</code></pre>

<p><img alt="" src="../assets/images/dc23.PNG" /></p>
<pre class="codehilite"><code>dtree.score(x_train, y_train)</code></pre>

<p><img alt="" src="../assets/images/dc24.PNG" /></p>
<pre class="codehilite"><code>dtree.score(x_val, y_val)</code></pre>

<p><img alt="" src="../assets/images/dc25.PNG" /></p>
<pre class="codehilite"><code>from IPython.display import SVG
from graphviz import Source
from sklearn import tree
graph = Source( tree.export_graphviz(dtree, out_file=None, feature_names=x_train.columns))
SVG(graph.pipe(format='svg')</code></pre>

<p><img alt="" src="../assets/images/dc26.PNG" /></p>
<pre class="codehilite"><code>p_val = dtree.predict(x_val)
def mae(p, t):
    return np.sum(np.abs(p - t)) / len(p)
mae(p_val, y_val)</code></pre>

<p><img alt="" src="../assets/images/dc27.PNG" /></p>
<h4 id="decision-tree-model">Decision tree model<a class="headerlink" href="#decision-tree-model" title="Permanent link">&para;</a></h4>
<pre class="codehilite"><code>from sklearn.tree import DecisionTreeRegressor
dtree=DecisionTreeRegressor(max_depth=15)
dtree.fit(x_train, y_train)</code></pre>

<p><img alt="" src="../assets/images/dc28.PNG" /></p>
<pre class="codehilite"><code>def print_score(mm):
    print("train r^2 " + str(mm.score(x_train, y_train)))
    print("validation r^2 " + str(mm.score(x_val, y_val)))
    p_val = mm.predict(x_val)
    p_train = mm.predict(x_train)
    print("mean absolute error(Train): " + str(mae(p_train, y_train)))
    print("mean absolute error(Validation): " + str(mae(p_val, y_val)))
print_score(dtree)</code></pre>

<p><img alt="" src="../assets/images/dc29.PNG" /></p>
<pre class="codehilite"><code>p_test = dtree.predict(x_test)
p_test</code></pre>

<p><img alt="" src="../assets/images/dc30.PNG" /></p>
<pre class="codehilite"><code>submission = pd.DataFrame()
submission['Id'] = testIds
submission[target_col] = p_test
submission.head()</code></pre>

<p><img alt="" src="../assets/images/dc31.PNG" /></p>
<pre class="codehilite"><code>submission.to_csv("submission.csv", index=False)
def train_and_get_score(max_depth):
    dtree=DecisionTreeRegressor(max_depth=max_depth)
    dtree.fit(x_train[:10000], y_train[:10000])
    p_val = dtree.predict(x_val[:1000])
    p_train = dtree.predict(x_train[:10000])
    return mae(p_train, y_train[:10000]), mae(p_val, y_val[:1000])
train_and_get_score(5)</code></pre>

<p><img alt="" src="../assets/images/dc32.PNG" /></p>
<pre class="codehilite"><code>train_score = []
valid_score = []
x_axis = []
for max_depth in range(1, 40, 5):
    ts, vs = train_and_get_score(max_depth)
    train_score.append(ts)
    valid_score.append(vs)
    x_axis.append(max_depth)
import matplotlib.pyplot as plt
plt.plot(x_axis, train_score,)
plt.plot(x_axis, valid_score)
plt.ylabel('Score')
plt.xlabel('max_depth')
plt.show()</code></pre>

<p><img alt="" src="../assets/images/dc33.PNG" /></p>
<h4 id="random-forest">Random forest<a class="headerlink" href="#random-forest" title="Permanent link">&para;</a></h4>
<pre class="codehilite"><code>from sklearn.ensemble import RandomForestRegressor
model = RandomForestRegressor(n_jobs=-1, max_depth=15, max_features='sqrt', n_estimators=100)
%time model.fit(x_train, y_train)</code></pre>

<p><img alt="" src="../assets/images/dc34.PNG" /></p>
<pre class="codehilite"><code>print_score(model)</code></pre>

<p><img alt="" src="../assets/images/dc35.PNG" /></p>
<pre class="codehilite"><code>model.estimators_[0]</code></pre>

<p><img alt="" src="../assets/images/dc36.PNG" /></p>
<pre class="codehilite"><code>print_score(model.estimators_[0])</code></pre>

<p><img alt="" src="../assets/images/dc37.PNG" /></p>
<pre class="codehilite"><code>#for dtree_model in model.estimators_:
#    print_score(dtree_model)
#    print("------------------------------------")
p_test = model.predict(x_test)
submission = pd.DataFrame()
submission['Id'] = testIds
submission[target_col] = p_test
submission.to_csv("submission_random_forest_30.csv", index=False)
feature_imp = pd.DataFrame(model.feature_importances_,
                                   index = x_train.columns,
                                    columns=['importance']).sort_values('importance'</code></pre>

<pre class="codehilite"><code>feature_imp</code></pre>

<p><img alt="" src="../assets/images/dc38.PNG" /></p>
<pre class="codehilite"><code>feature_imp['importance'].nlargest(10).plot(kind='barh')</code></pre>

<p><img alt="" src="../assets/images/dc39.PNG" /></p>
<p><img alt="" src="../assets/images/dc40.PNG" /></p>
<pre class="codehilite"><code>from lightgbm import LGBMRegressor
params = {
    'n_estimators': 100,
    'learning_rate': 0.3, 
    'num_leaves': 30,
    'objective': 'regression_l2', 
    'metric': 'mae',
    'verbose': -1,
}

model = LGBMRegressor(**params)
model.fit(
   x_train, y_train,
    eval_metric='mae',
    verbose=20,
)</code></pre>

<p><img alt="" src="../assets/images/dc41.PNG" /></p>
<pre class="codehilite"><code>print_score(model)</code></pre>

<p><img alt="" src="../assets/images/dc42.PNG" /></p>
<pre class="codehilite"><code>p_test = model.predict(x_test)
submission = pd.DataFrame()
submission['Id'] = testIds
submission[target_col] = p_test
submission.to_csv("submission_lightgdm.csv", index=False)
feature_imp = pd.DataFrame(model.feature_importances_,
                                   index = x_train.columns,
                                    columns=['importance']).sort_values('importance', ascending=False)
feature_imp['importance'].nlargest(10).plot(kind='barh')</code></pre>

<p><img alt="" src="../assets/images/dc43.PNG" /></p>
<p><img alt="" src="../assets/images/dc44.PNG" /></p>
<p>**  Kekurangan Pohon Keputusan**</p>
<p>• Terjadi overlap terutama ketika kelas-kelas dan criteria yang digunakan jumlahnya sangat banyak. Hal tersebut juga dapat menyebabkan meningkatnya waktu pengambilan keputusan dan jumlah memori yang diperlukan.</p>
<p>• Pengakumulasian jumlah eror dari setiap tingkat dalam sebuah pohon keputusan yang besar.</p>
<p>• Kesulitan dalam mendesain pohon keputusan yang optimal.</p>
<p>• Hasil kualitas keputusan yang didapatkan dari metode pohon keputusan sangat tergantung pada bagaimana pohon tersebut didesain.</p>
<p>**  Kelebihan Pohon Keputusan**</p>
<p>Kelebihan dari metode pohon keputusan adalah:</p>
<p>• Daerah pengambilan keputusan yang sebelumnya kompleks dan sangat global, dapat diubah menjadi lebih simpel dan spesifik.</p>
<p>• Eliminasi perhitungan-perhitungan yang tidak diperlukan, karena ketika menggunakan metode pohon keputusan maka sample diuji hanya berdasarkan kriteria atau kelas tertentu.</p>
<p>• Fleksibel untuk memilih fitur dari internal node yang berbeda, fitur yang terpilih akan membedakan suatu kriteria dibandingkan kriteria yang lain dalam node yang sama. Kefleksibelan metode pohon keputusan ini meningkatkan kualitas keputusan yang dihasilkan jika dibandingkan ketika menggunakan metode penghitungan satu tahap yang lebih konvensional</p>
<p>• Dalam analisis multivariat, dengan kriteria dan kelas yang jumlahnya sangat banyak, seorang penguji biasanya perlu untuk mengestimasikan baik itu distribusi dimensi tinggi ataupun parameter tertentu dari distribusi kelas tersebut. Metode pohon keputusan dapat menghindari munculnya permasalahan ini dengan menggunakan criteria yang jumlahnya lebih sedikit pada setiap node internal tanpa banyak mengurangi kualitas keputusan yang dihasilkan.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../K-NN/" title="KNN data iris" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                KNN data iris
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2019 sitimusabbiahtulfadilah
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/sitimusabbiahtulfadilah1234" class="md-footer-social__link fa fa-github-alt"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.8c0d971c.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>